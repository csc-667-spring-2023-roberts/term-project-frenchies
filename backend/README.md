# Backend

The backend's architecture might seem a bit complex, but is actually designed to be easily scalable.
We will explain everything step-by-step in this document, but feel free to take a look at the 
various folders and play with the components !

## Architecture

The backend service contains a few distinct components.
They all play a role in the server and help to handle request, interact with the database and 
provide security to the system.

Everything starts in the [index.ts](./index.ts) file, this is where the express server is 
started and where we handle its shutdown.

The [app.ts](app.ts) file contains a series of middleware instantiations, including but not 
limited to:
- CORS
- Security Functions
- Error Handling

It also wraps the main router instantiation, which you can learn more about in the [app.routes.ts](./app.routes.ts) file.
This last file act as a proxy router for the sub-routers scoped to specific resources such as 
the users, messages, sessions and more.

For now, only the users router is available, in [./routes/user](./routes/user).
Each resource follows the same architecture, with the following files:
- `routes.ts` - Where the routes are declared.
- `controllers.ts` - Where the controllers handling business logic are implemented.
- `helpers.ts` - Any method used to validate and build ROs or DTOs are implemented.
- `middlewares.ts` - Any middleware specific to the resource.
- `types.ts` - All the ROs and DTOs declaration.

The [middlewares](./middlewares) folder contains general-purpose middlewares used across the 
entire backend.

The [database](./database) folder contains TypeScript definitions of the entities in the database.
They are generated by running the `npm run db:schemadump` command.
You can also find the [torm](./database/torm) folder, which contains the implementation of our 
home-made ORM.
